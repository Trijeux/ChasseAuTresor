#include <algorithm>
#include <iostream>
#include <string>
#include "Map.h"
#include "InputPlayer.h"


//Coordonnees
int Coordinate()
{
	bool validInput = true;
	bool validNumber = false;
	std::string inputString;

	//ligne x
	unsigned int x = 0;

	//colonne y
	unsigned int y = 0;

	do
	{
		do
		{
			validNumber = false;
			std::cout << "entre ligne (un numero) entre " << 1 << "-" << WIDTH << std::endl;
			std::getline(std::cin, inputString);

			validInput = true;

			if (inputString.length() == 0 || !std::all_of(inputString.begin(), inputString.end(), ::isdigit))
			{
				std::cout << inputString << " n'est pas un nombre" << std::endl;
				validInput = false;
			}
			if (validInput)
			{
				x = std::stoi(inputString);
				if (x > WIDTH || x < 1)
				{
					validNumber = true;
					std::cout << "Ce n'es pas un chiffre entre 1-" << WIDTH << std::endl;
				}
			}
		} while (validNumber);

	} while (!validInput);

	do
	{
		std::cout << "entre colonne (un numero) entre " << 1 << "-" << HEIGHT << std::endl;
		std::getline(std::cin, inputString);

		validInput = true;

		if (inputString.length() == 0 || !std::all_of(inputString.begin(), inputString.end(), ::isdigit))
		{
			std::cout << inputString << " n'est pas un nombre" << std::endl;
			validInput = false;
		}

		if (validInput)
		{
			y = std::stoi(inputString);
			if (y > HEIGHT) y = HEIGHT;
			if (y < 1) y = 1;
		}

	} while (!validInput);

	return (x - 1) * HEIGHT + (y - 1);
}


//Condition de Victoire
bool Compar(int indexresult)
{
	if (Chest[indexresult] == tile::coffre_tresor)
	{
		system("cls");
		GamePlayer[indexresult] = 2;
		std::cout << "        ..::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::..        " << std::endl;
		std::cout << "    .-#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#=.    " << std::endl;
		std::cout << "  .+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+.  " << std::endl;
		std::cout << ".:%@@@@+--#@@@========================================================================@@@#--+@@@@%:." << std::endl;
		std::cout << ".@@@@+:::-#@@@========================================================================@@@#-:::+@@@@:" << std::endl;
		std::cout << "*@@@+::::-#@@@========================================================================@@@#-::::+@@@*" << std::endl;
		std::cout << "@@@%=::::-#@@@========================================================================@@@#-::::-%@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@################+==========*################*==========+################@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@@@@@@@@@@@@@@@@@@*========@@@@@@@@@@@@@@@@@@@@========+@@@@@@@@@@@@@@@@@@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@%###############*==========##################+=========+###############%@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@========================================================================@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@========================================================================@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@========================================================================@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@#-::::-#@@@========================================================================@@@#-::::-#@@@" << std::endl;
		std::cout << "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@" << std::endl;
		std::cout << "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@" << std::endl;
		std::cout << "@@@%====================================#@@@+==========+@@@#====================================%@@@" << std::endl;
		std::cout << "@@@#-::::::::::::::::::::::::::::::::::-*@@@=::::::::::=@@@*-::::::::::::::::::::::::::::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::::::::::::::::::::::::::::-*@@@=::::::::::=@@@*-::::::::::::::::::::::::::::::::::-#@@@" << std::endl;
		std::cout << "@@@#-:::::::::-%%%%%%%%%%%%%%%%%%%%%%%%%@@@@=:::-##=:::=@@@@%%%%%%%%%%%%%%%%%%%%%%%%%-:::::::::-#@@@" << std::endl;
		std::cout << "@@@#-:::::::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=::-%@@%-::=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::#@@@%+=====================*@@@=:::-==-:::=@@@*=====================+%@@@#::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::=@@@@@@@=======================+@@@@=::::::::=@@@@+=======================@@@@@@@=::::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@@@==========================+@@@@@@-::-%@@@@%+==========================@@@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+=============================#@@@@@@@@@@@@%=============================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+================================#@@@@@@#================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@@@@@@@@@@@@@=====#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%===========%@@@@@@@@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@@@@@@@@@@@@#=====+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*===========*@@@@@@@@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+========================================================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+========================================================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+========================================================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+========================================================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+======+****************========+*************========+**************====+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+=====#@@@@@@@@@@@@@@@@@+=======@@@@@@@@@@@@@@#======+@@@@@@@@@@@@@@@%===+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+======*###############*========+*###########*========+*############*+===+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@+========================================================================+@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::*@@@%*======================================================================+#@@@*-:::-#@@@" << std::endl;
		std::cout << "@@@#-::::+@@@@@@#==================================================================#@@@@@@+::::-#@@@" << std::endl;
		std::cout << "@@@#-:::::-=+@@@@%================================================================#@@@@+=-:::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::-%@@@@@@@@@@@@@@@@@@@@@@@@@@@#=====*@@*=====#@@@@@@@@@@@@@@@@@@@@@@@@@@@@-::::::::-#@@@" << std::endl;
		std::cout << "@@@#-:::::::::+@@@@@@@@@@@@@@@@@@@@@@@@@@@%=:::-*@@*-:::-%@@@@@@@@@@@@@@@@@@@@@@@@@@@+:::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-#@@@" << std::endl;
		std::cout << "@@@#-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-#@@@" << std::endl;
		std::cout << "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@" << std::endl;
		std::cout << "%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%" << std::endl;
		std::cout << "Tu as trouve le Tresor tu as gagne" << std::endl;
		return true;
	}
	GamePlayer[indexresult] = 1;
	std::cout << "Rien trouve" << std::endl;
	return false;

}